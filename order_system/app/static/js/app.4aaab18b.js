(function(e){function t(t){for(var o,s,l=t[0],i=t[1],c=t[2],p=0,d=[];p<l.length;p++)s=l[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);u&&u(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],o=!0,l=1;l<r.length;l++){var i=r[l];0!==a[i]&&(o=!1)}o&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var o={},a={app:0},n=[];function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=o,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=i;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"140b":function(e,t,r){},1578:function(e,t,r){"use strict";r.r(t);var o=r("96eb"),a=r.n(o);a.a.setup({timeout:"200-600"}),a.a.mock("/API/login",{uid:"1",username:"admin",isLogin:!0}),a.a.mock("/API/getStocks",{stockList:[{contact:"182****9597",creator:"张三",dateTime:"2020-03-27 02:38:47",num:20,platform:"vx",price:1e3,productDescription:{color:"silver",outlook:"全新",storage:"1T",memory:"16G"},productName:"iPhone",productType:["Phone","Apple"],stockId:1,total:2e4},{contact:"182****9597",creator:"张三",dateTime:"2020-03-27 03:48:47",num:20,platform:"vx",price:3e3,productDescription:{color:"silver",outlook:"全新",storage:"1T"},productName:"Ipad Pro",productType:["Pad"],stockId:2,total:2e4},{contact:"182****9597",creator:"李四",dateTime:"2020-03-27 03:48:47",num:1,platform:"vx",price:3e3,productDescription:{description:"周杰伦nb"},productName:"周杰伦门票",productType:["Other"],stockId:3,total:3e3}],stockNum:1}),a.a.mock("/API/getStockInfo",{stock:{contact:"182****9597",creator:"张三",dateTime:"2020-03-27 03:48:47",platform:"vx",money:{num:10,price:200},productDescription:{color:"silver",outlook:"全新",storage:"512G"},productName:"Ipad Pro",productType:["Pad"]}}),a.a.mock("/API/editStockInfo",{status:"success"}),a.a.mock("/API/stock",{types:["Phone","Pad","Other"],num:[10,20,3],total:[1e3,2700,30],overview:{num:33,total:3030}}),a.a.mock("/API/addStock",{status:"success"}),a.a.mock("/API/logout",{}),a.a.mock("/API/register",{verified:!0}),a.a.mock("/API/getUserInfo",{username:"admin",email:"example@example.com",password:"123456",role:1}),a.a.mock("/API/editInfo",{verified:!0}),a.a.mock("/API/getOrders",{orderList:[{orderId:12,submitterId:2,dateTime:"2020-3-27 10:34:22",productName:"戴尔xps12寸",productType:["Computer","Laptop","Windows"],withAccessories:!0,purchasePrice:8999.01,soldPrice:9049,postPrice:30,profit:19.978,productDescription:{color:"silver",outlook:"非常tm新",memory:"16G",storage:"1024"},purchaser:"居家",contact:"7238784764",platform:"vx",note:"",accessories:["Mouse","KeyBoard"]},{orderId:13,submitterId:1,dateTime:"2020-3-26 13:32:22",productName:"Ipad Pro 2018",productType:["Pad"],withAccessories:!0,purchasePrice:6899,soldPrice:7200,postPrice:10,profit:291,productDescription:{color:"silver",outlook:"全新",storage:"512G"},purchaser:"理鸭",contact:"23425577232",platform:"vx",note:"",accessories:["Pen","Charger"]}]}),a.a.mock("/API/getWeekGraph",{sales:[15,3,6,27,2,5,0],profit:[2e3,150,289,-40,1500,200,0]}),a.a.mock("/API/getMonthGraph",{day:31,sales:[15,3,6,27,2,5,0,12,13,5,1,4],profit:[2e3,150,289,-40,1500,200,0,130,423,23,-33,1320]}),a.a.mock("/API/money",{orderPost:100,orderProfit:500,orderPurchase:1400,orderSold:2e3,stockMoney:1e3}),a.a.mock("/API/moneyDetail",{moneyDetail:[{dateTime:"2020-04-11 01:21:39",money:"4000",productName:"iPad",productType:["Pad"],type:"in"},{dateTime:"2020-04-11 01:21:40",money:"5000",productName:"iPhone",productType:["Phone","Apple"],type:"out"}],num:2})},1870:function(e,t,r){},"1d55":function(e,t,r){},2596:function(e,t,r){"use strict";var o=r("e123"),a=r.n(o);a.a},"271a":function(e,t,r){"use strict";var o=r("7000"),a=r.n(o);a.a},3952:function(e,t,r){},"3dfc":function(e,t,r){e.exports=r.p+"img/404.a57b6f31.png"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),a=r("5c96"),n=r.n(a),s=(r("0fae"),r("8c4f")),l=r("2f62"),i=r("bc3a"),c=r.n(i),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},p=[],d={name:"App"},m=d,f=r("2877"),h=Object(f["a"])(m,u,p,!1,null,null,null),g=h.exports,b=(r("96cf"),r("1da1")),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"loginForm",attrs:{"label-width":"80px","label-position":"top",model:e.loginForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名/邮箱",prop:"username"}},[r("el-input",{staticClass:"input_width",model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{staticClass:"input_width",attrs:{type:"password","show-password":""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),r("el-form-item",[r("el-checkbox",{model:{value:e.loginForm.rememberMe,callback:function(t){e.$set(e.loginForm,"rememberMe",t)},expression:"loginForm.rememberMe"}},[e._v("七天免登录")])],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.handleLogin("loginForm")}}},[e._v("登录")])],1)],1)},w=[],y={name:"Login",data:function(){return{loading:!1,loginForm:{username:"",password:"",rememberMe:!1},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{handleLogin:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&(t.loading=!0,t.$store.dispatch("login",t.loginForm).catch((function(e){return console.log(e)})),t.loading=!1,!0)}))}}},x=y,k=(r("89c7"),Object(f["a"])(x,v,w,!1,null,"9ca9b08e",null)),F=k.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-aside",{attrs:{width:"300px"}},[r("el-card",{staticStyle:{width:"250px",height:"300px"}},[r("div",{staticClass:"user-avatar"},[r("el-image",{staticStyle:{width:"100%"},attrs:{fit:"cover",src:e.avatar}},[r("div",{attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})]),r("div",{attrs:{slot:"placeholder"},slot:"placeholder"},[r("img",{attrs:{src:e.defaultImage,alt:"正在加载.."}})])])],1),r("div",{staticClass:"avatar-button"},[r("el-upload",{attrs:{limit:1,accept:"jpg,png,jpeg",action:"https://baidu.com"}},[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:e.handleUpload}},[e._v("修改头像")])],1)],1)])],1),r("el-main",[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"profile",attrs:{model:e.profile,"label-width":"120px","label-position":"right",rules:e.profileRules}},[r("el-form-item",{attrs:{label:"修改用户名",prop:"username"}},[r("el-input",{staticStyle:{width:"50%"},model:{value:e.profile.username,callback:function(t){e.$set(e.profile,"username",t)},expression:"profile.username"}})],1),r("el-form-item",{attrs:{label:"更改邮箱",prop:"email"}},[r("el-input",{staticClass:"input_width",attrs:{type:"email",required:""},model:{value:e.profile.email,callback:function(t){e.$set(e.profile,"email",t)},expression:"profile.email"}})],1),r("el-form-item",{attrs:{label:"修改密码"}},[r("el-switch",{model:{value:e.profile.changePassword,callback:function(t){e.$set(e.profile,"changePassword",t)},expression:"profile.changePassword"}})],1),r("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword","hide-required-asterisk":!e.profile.changePassword}},[r("el-input",{staticClass:"input_width",attrs:{type:"password",disabled:!e.profile.changePassword,"show-password":""},model:{value:e.profile.oldPassword,callback:function(t){e.$set(e.profile,"oldPassword",t)},expression:"profile.oldPassword"}})],1),r("el-form-item",{attrs:{label:"新密码",prop:"newPassword","hide-required-asterisk":!e.profile.changePassword}},[r("el-input",{staticClass:"input_width",attrs:{type:"password",disabled:!e.profile.changePassword,"show-password":"",minlength:"6",maxlength:"26","show-word-limit":""},model:{value:e.profile.newPassword,callback:function(t){e.$set(e.profile,"newPassword",t)},expression:"profile.newPassword"}})],1),r("el-form-item",{attrs:{label:"确认新密码",prop:"vnewPassword","hide-required-asterisk":!e.profile.changePassword}},[r("el-input",{staticClass:"input_width",attrs:{type:"password",disabled:!e.profile.changePassword,"show-password":""},model:{value:e.profile.vnewPassword,callback:function(t){e.$set(e.profile,"vnewPassword",t)},expression:"profile.vnewPassword"}})],1),r("el-row",{attrs:{gutter:6}},[r("el-col",{attrs:{span:6}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.handleUpdate(t)}}},[e._v("更新")])],1)],1),1===e.role?r("el-col",{attrs:{span:6}},[r("el-row",[r("el-col",{attrs:{push:19,span:6}},[r("el-button",{attrs:{type:"warning"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加新用户")])],1)],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("Register")],1)],1):e._e()],1)],1)],1)],1)},T=[],_=(r("ac1f"),r("466d"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"regForm",attrs:{"label-width":"80px",model:e.regForm,rules:e.regRules,"label-position":"top"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{staticClass:"narrow_input",staticStyle:{width:"100%"},model:{value:e.regForm.username,callback:function(t){e.$set(e.regForm,"username",t)},expression:"regForm.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{staticClass:"narrow_input",attrs:{type:"email"},model:{value:e.regForm.email,callback:function(t){e.$set(e.regForm,"email",t)},expression:"regForm.email"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{staticClass:"narrow_input",attrs:{type:"password",minlength:"6",maxlength:"26","show-password":""},model:{value:e.regForm.password,callback:function(t){e.$set(e.regForm,"password",t)},expression:"regForm.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"vpassword"}},[r("el-input",{staticClass:"narrow_input",attrs:{type:"password","show-password":""},model:{value:e.regForm.vpassword,callback:function(t){e.$set(e.regForm,"vpassword",t)},expression:"regForm.vpassword"}})],1),r("el-form-item",{attrs:{label:"角色"}},[r("el-radio-group",{model:{value:e.regForm.role,callback:function(t){e.$set(e.regForm,"role",t)},expression:"regForm.role"}},[r("el-radio",{attrs:{label:1}},[e._v("管理员")]),r("el-radio",{attrs:{label:2}},[e._v("用户")]),r("el-radio",{attrs:{label:3}},[e._v("访客")])],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleReg("regForm")}}},[e._v("添加新用户")])],1)],1)}),$=[],D={name:"Register",data:function(){var e=this,t=function(e,t,r){t.match(/^[a-zA-Z\u4E00-\u9FA5]{2,16}$/)?r():r(new Error("用户名非法！"))},r=function(e,t,r){t?t.length<6||t.length>26?r(new Error("密码长度应该在6-26位之间")):r():r(new Error("请输入密码！"))},o=function(t,r,o){r||o(new Error("请输入确认密码！")),r!==e.regForm.password?o(new Error("两次输入密码不一致！")):o()};return{loading:!1,regForm:{username:"",email:"",password:"",vpassword:"",role:2},regRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:t,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:r,trigger:"blur"}],vpassword:[{required:!0,message:"请输入确认密码",trigger:"blur"},{validator:o,trigger:"blur"}]}}},methods:{register:function(){var e={username:this.regForm.username,email:this.regForm.email,password:this.regForm.password,role:this.regForm.role};this.$store.dispatch("register",e).catch((function(e){return console.error(e)}))},handleReg:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.warn("Register error"),!1;t.loading=!0,t.register(),t.loading=!1}))}}},S=D,C=(r("918c"),Object(f["a"])(S,_,$,!1,null,"bc334132",null)),E=C.exports,O={name:"AboutMe",components:{Register:E},data:function(){var e=this,t=function(e,t,r){t.match(/^[a-zA-Z\u4E00-\u9FA5]{2,16}$/)?r():r(new Error("用户名非法！"))},r=function(t,r,o){e.profile.changePassword||o(),r?o():o(new Error("请输入旧密码！"))},o=function(t,r,o){e.profile.changePassword||o(),r?r.length<6||r.length>26?o(new Error("密码长度应在6-26位之间.")):o():o(new Error("请输入新密码！"))},a=function(t,r,o){e.profile.changePassword||o(),r?r!==e.profile.newPassword?o(new Error("两次输入密码不一致!")):o():o(new Error("请输入确认密码"))};return{loading:!1,role:3,dialogVisible:!1,defaultImage:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",profile:{username:"",email:"",changePassword:!1,oldPassword:"",newPassword:"",vnewPassword:""},profileRules:{username:[{required:!0,message:"请输入用户名！",trigger:"blur"},{validator:t,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱！",trigger:"blur"}],oldPassword:[{validator:r,trigger:"blur"}],newPassword:[{validator:o,trigger:"blur"}],vnewPassword:[{validator:a,trigger:"blur"}]}}},methods:{editInfo:function(e,t){var r=this;return Object(b["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,r.axios.put(e,t).then((function(e){"success"===e.data.status?(r.$message.success("修改信息成功！"),window.location.reload()):r.$message.error(e.data.reason)})).catch((function(e){console.error(e),r.$message.error("系统错误！")}));case 2:case"end":return o.stop()}}),o)})))()},handleUpdate:function(){var e=this;this.$refs["profile"].validate((function(t){if(!t)return console.warn("有东西没好好填"),!1;e.$confirm("确定修改个人信息？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,e.editInfo("/api/editUserInfo",e.profile),e.loading=!1})).catch((function(){e.$message.info("已取消")}))}))},handleUpload:function(){}},mounted:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/api/getUserInfo").then((function(t){console.log("获取用户信息成功"),e.profile.username=t.data.username,e.profile.email=t.data.email,e.role=t.data.role})).catch((function(t){console.error(t),e.$message.error("获取用户信息失败！")}));case 2:case"end":return t.stop()}}),t)})))()}},N=O,M=(r("dec9"),Object(f["a"])(N,P,T,!1,null,"fb4a3728",null)),I=M.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-aside",{staticStyle:{width:"200px","background-color":"#eef1f6"}},[r("el-header",{staticStyle:{width:"200px","background-color":"dodgerblue"}},[r("SideBarHeader")],1),r("Sidebar")],1),r("el-container",{attrs:{direction:"vertical"}},[r("el-header",[r("MainHeader")],1),r("el-main",{staticStyle:{width:"100%"}},[r("transition",{attrs:{name:"fade"}},[r("router-view")],1)],1),r("el-footer",[r("MainFooter")],1),r("el-backtop",[r("i",{staticClass:"el-icon-top"})])],1)],1)},R=[],L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-menu",{attrs:{mode:"vertical","background-color":"#eef1f6","default-active":e.$route.path.substr(e.$route.path.lastIndexOf("/")+1),"text-color":"#48576a","active-text-color":"#20a0ff",router:""}},[r("el-menu-item",{attrs:{index:"index"}},[e._v("首页")]),r("el-submenu",{attrs:{index:"inventory"}},[r("template",{slot:"title"},[e._v("管理库存")]),r("el-menu-item",{attrs:{index:"newStock"}},[e._v("新建库存")]),r("el-menu-item",{attrs:{index:"stockList"}},[e._v("库存列表")]),r("el-menu-item",{attrs:{index:"stockGraph"}},[e._v("库存总览")])],2),r("el-submenu",{attrs:{index:"order"}},[r("template",{slot:"title"},[e._v("管理订单")]),r("el-menu-item",{attrs:{index:"newStorageOrder"}},[e._v("增加库存订单")]),r("el-menu-item",{attrs:{index:"newOrder"}},[e._v("增加其他订单")]),r("el-menu-item",{attrs:{index:"orderList"}},[e._v("订单列表")])],2),r("el-submenu",{attrs:{index:"fund"}},[r("template",{slot:"title"},[e._v("资金流水")]),r("el-menu-item",{attrs:{index:"fundGraph"}},[e._v("资金总览")]),r("el-menu-item",{attrs:{index:"fundflow"}},[e._v("流水明细")])],2)],1)},A=[],G={name:"Sidebar",data:function(){return{}},methods:{}},q=G,B=Object(f["a"])(q,L,A,!1,null,"2ce7669d",null),W=B.exports,z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Logo"},[e._v("Dashboard")])},V=[],H={name:"SideBarHeader"},U=H,J=(r("65b5"),Object(f["a"])(U,z,V,!1,null,"258bc55a",null)),K=J.exports,Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"copyright"},[e._v("© 2020 Made with ❤️ by Michael & vividGuy.")])},Y=[],Q={name:"MainFooter"},X=Q,ee=(r("939d"),Object(f["a"])(X,Z,Y,!1,null,"57f5092e",null)),te=ee.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-header"},[r("div",{staticClass:"user-info"},[r("el-menu",{attrs:{mode:"horizontal"}},[r("el-submenu",{attrs:{index:"1"}},[r("template",{slot:"title"},[r("div",{staticClass:"welcome"},[r("el-avatar",{attrs:{size:"medium",src:e.avatar}}),r("span",{staticClass:"name",domProps:{textContent:e._s(e.username)}})],1)]),r("el-menu-item",{attrs:{index:"profile"},on:{click:e.handleProfile}},[e._v("个人资料")]),r("el-menu-item",{attrs:{index:"logout"},on:{click:e.handleLogout}},[e._v("登出")])],2)],1)],1)])},oe=[],ae={name:"MainHeader",data:function(){return{username:this.$store.state.user.username,avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}},methods:{handleProfile:function(){this.$router.push("/dashboard/profile")},handleLogout:function(){var e=this;this.$confirm("确认登出？","提示",{confirmButtonText:"登出",cancelButtonText:"取消",type:"warning"}).then((function(){var t=a["Loading"].service({fullscreen:!0,text:"正在登出",background:"rgba(0,0,0,0.8)",spinner:"el-icon-spinner"});e.$store.dispatch("logout").catch((function(e){return console.error(e)})),setTimeout((function(){t.close(),e.$router.push("/")}),3e3)})).catch((function(){e.$message.info("已取消登出")}))}}},ne=ae,se=(r("c3df"),Object(f["a"])(ne,re,oe,!1,null,"1463b988",null)),le=se.exports,ie={name:"Home",components:{MainHeader:le,MainFooter:te,SideBarHeader:K,Sidebar:W}},ce=ie,ue=(r("ecac"),Object(f["a"])(ce,j,R,!1,null,"60151d0c",null)),pe=ue.exports,de=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("vue-canvas-nest",{attrs:{config:{opacity:.7,count:300}}}),r("el-card",{staticClass:"welcomeCard"},[r("router-view")],1)],1)},me=[],fe=r("01b4"),he={name:"Welcome",components:{VueCanvasNest:fe["a"]}},ge=he,be=(r("822b"),Object(f["a"])(ge,de,me,!1,null,"2b70a54f",null)),ve=be.exports,we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("v-chart",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{options:e.weekData,autoresize:""}})],1),r("div",[r("v-chart",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{options:e.monthData,autoresize:""}})],1)])},ye=[],xe=(r("d81d"),r("94b1"),r("ef97"),r("b11c"),r("d28f"),r("627c"),r("9ca8"));o["default"].component("v-chart",xe["a"]);var ke={name:"Console",data:function(){return{loading:!1,weekData:{title:{text:"最近7天订单统计表"},legend:{show:!0,data:["销量","盈利额"]},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",name:"销量",min:0},{type:"value",name:"盈利",axisLabel:{formatter:"{value}元"}}],toolbox:{show:!0,top:-6,feature:{saveAsImage:{show:!0},restore:{show:!0}}},series:[{name:"销量",type:"bar",data:[],barWidth:"60%",label:{show:!0,position:"insideTop"},itemStyle:{normal:{color:function(e){var t=["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"];return t[e.dataIndex]}}}},{name:"盈利额",type:"line",data:[],yAxisIndex:1,label:{show:!0,position:"bottom",formatter:function(e){return e.value<0?"{a|"+e.value+"}":"{b|"+e.value+"}"},rich:{a:{color:"#ff0000"},b:{color:"#005c98"}}}}]},monthData:{title:{text:"本月订单统计表"},legend:{data:["销量","盈利额"]},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",name:"销量",min:0},{type:"value",name:"盈利",axisLabel:{formatter:"{value}元"}}],toolbox:{top:-6,feature:{saveAsImage:{show:!0},restore:{show:!0}}},series:[{name:"销量",type:"bar",data:[],barWidth:"60%",label:{show:!0,position:"insideTop"},itemStyle:{normal:{color:function(e){var t=["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"];return t[e.dataIndex]}}}},{name:"盈利额",type:"line",data:[],yAxisIndex:1,label:{show:!0,position:"bottom",formatter:function(e){return e.value<0?"{a|"+e.value+"}":"{b|"+e.value+"}"},rich:{a:{color:"#ff0000"},b:{color:"#005c98"}}}}]}}},methods:{postOrderData:function(){this.loading=!0,this.getWeek(),this.getMonth()},getWeek:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/api/getWeekGraph").then((function(t){e.weekData.series[0].data=t.data.sales,e.weekData.series[1].data=t.data.profit,e.weekData.xAxis[0].data=e.getSevenDays()})).catch((function(t){e.$message.error("表格获取失败！"),console.error(t)}));case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()},getMonth:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/api/getMonthGraph").then((function(t){e.monthData.series[0].data=t.data.sales,e.monthData.series[1].data=t.data.profit,e.monthData.xAxis[0].data=e.getMonthDays(t.data.day)})).catch((function(e){console.error(e)}));case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()},getSevenDays:function(){for(var e=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],t=new Date,r=[t.getDay()],o=0;o<6;o++)t.setDate(t.getDate()-1),r.unshift(t.getDay());return r.map((function(t){return e[t]}))},getMonthDays:function(e){for(var t=new Date,r=[t.getMonth()+1+"/"+t.getDate()],o=0;o<e-1;o++)t.setDate(t.getDate()-1),r.unshift(t.getMonth()+1+"/"+t.getDate());return r}},mounted:function(){this.postOrderData()}},Fe=ke,Pe=(r("f4e8"),Object(f["a"])(Fe,we,ye,!1,null,"8228559e",null)),Te=Pe.exports,_e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"outer"},[r("div",{staticClass:"left"},[r("el-image",{attrs:{src:e.src}})],1),r("div",{staticClass:"right"},[r("p",[e._v("OOPS!")]),r("div",{staticClass:"inform"},[e._v(" The page you're looking for does not exist! ")]),r("br"),r("div",{staticStyle:{"font-size":"15px"}},[r("el-link",{attrs:{type:"primary",underline:!1,href:"#/dashboard"}},[e._v("Click here to go to Home page")])],1)])])},$e=[],De=r("3dfc"),Se=r.n(De),Ce={name:"NotFound",data:function(){return{src:Se.a}}},Ee=Ce,Oe=(r("2596"),Object(f["a"])(Ee,_e,$e,!1,null,"487a8179",null)),Ne=Oe.exports,Me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{visible:e.stockTableVisible},on:{"update:visible":function(t){e.stockTableVisible=t}}},[r("SelectableStockList",{on:{transferSelectedRow:e.getRow}}),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.stockTableVisible=!1}}},[e._v("确定")])],1)],1),r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"orderForm",attrs:{model:e.orderForm,"label-width":"120px","label-position":"right",rules:e.orderRules}},[r("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[r("span",{domProps:{textContent:e._s(e.orderForm.productName)}}),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.stockTableVisible=!0}}},[e._v("选择库存产品")])],1),r("el-form-item",{attrs:{label:"产品类型"}},[r("span",{domProps:{textContent:e._s(e.orderForm.productType.length>0?e.translateType(e.orderForm.productType):"")}})]),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"售价"}},[r("el-input-number",{attrs:{precision:2,step:.01,"controls-position":"right",min:0},model:{value:e.orderForm.money.soldPrice,callback:function(t){e.$set(e.orderForm.money,"soldPrice",t)},expression:"orderForm.money.soldPrice"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"邮费"}},[r("el-input-number",{attrs:{precision:2,step:.01,"controls-position":"right",min:0},model:{value:e.orderForm.money.postPrice,callback:function(t){e.$set(e.orderForm.money,"postPrice",t)},expression:"orderForm.money.postPrice"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"数量"}},[r("el-input-number",{attrs:{step:1,"controls-position":"right",min:0,max:e.max},model:{value:e.orderForm.num,callback:function(t){e.$set(e.orderForm,"num",t)},expression:"orderForm.num"}})],1)],1)],1),r("el-form-item",{staticClass:"productDescription",attrs:{label:"产品描述","label-width":"130px"}},[e.orderForm.productDescription.description?r("span",{domProps:{textContent:e._s(e.orderForm.productDescription.description)}}):e._e()]),e.orderForm.productDescription.description?e._e():r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"颜色",prop:"color"}},[r("span",{domProps:{textContent:e._s(e.colorMap[e.orderForm.productDescription.color])}})])],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"成色",prop:"outlook"}},[r("span",{domProps:{textContent:e._s(e.orderForm.productDescription.outlook)}})])],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[void 0!==e.orderForm.productDescription.memory?r("el-form-item",{attrs:{label:"内存"}},[r("span",{domProps:{textContent:e._s(e.orderForm.productDescription.memory)}})]):e._e()],1),r("el-col",{attrs:{span:6}},[void 0!==e.orderForm.productDescription.storage?r("el-form-item",{attrs:{label:"容量"}},[r("span",{domProps:{textContent:e._s(e.orderForm.productDescription.storage)}})]):e._e()],1)],1),r("el-form-item",{attrs:{label:"购买人姓名",prop:"purchaser"}},[r("el-input",{model:{value:e.orderForm.purchaser,callback:function(t){e.$set(e.orderForm,"purchaser",t)},expression:"orderForm.purchaser"}})],1),r("el-form-item",{attrs:{label:"购买人联系方式",prop:"contact","label-width":"130px"}},[r("el-input",{model:{value:e.orderForm.contact,callback:function(t){e.$set(e.orderForm,"contact",t)},expression:"orderForm.contact"}})],1),r("el-form-item",{attrs:{label:"出售方式",prop:"platform"}},[r("el-input",{model:{value:e.orderForm.platform,callback:function(t){e.$set(e.orderForm,"platform",t)},expression:"orderForm.platform"}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.orderForm.note,callback:function(t){e.$set(e.orderForm,"note",t)},expression:"orderForm.note"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleNew}},[e._v("新建订单")])],1)],1)],1)},Ie=[],je={postOrder:function(e,t){return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,c.a.post(e,t).then((function(e){"success"===e.data.status&&(a["Message"].success("新建订单成功！"),window.location.reload())})).catch((function(e){console.error(e),a["Message"].error("新建订单失败！")}));case 2:case"end":return r.stop()}}),r)})))()},deleteOrder:function(e,t){return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,c.a.delete(e,{data:t}).then((function(e){"success"===e.data.status&&a["Message"].success("删除订单成功！")})).catch((function(e){console.error(e),a["Message"].error("删除订单失败")}));case 2:case"end":return r.stop()}}),r)})))()}},Re=je,Le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("span",{staticStyle:{color:"red"}},[e._v("*请不要勾选选择框，单击所需行即可选择")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.stockList,border:"","highlight-current-row":""},on:{"current-change":e.handleSelect}},[r("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-checkbox",{model:{value:t.row.checked,callback:function(r){e.$set(t.row,"checked",r)},expression:"props.row.checked"}})]}}])}),e._e(),r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"产品颜色"}},[r("span",{domProps:{textContent:e._s(e.translateColor(t.row.productDescription.color))}})]),r("el-form-item",{attrs:{label:"产品外观"}},[r("span",{domProps:{textContent:e._s(t.row.productDescription.outlook)}})]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.hasMemory(t.row),expression:"hasMemory(props.row)"}],attrs:{label:"产品内存"}},[r("span",{domProps:{textContent:e._s(t.row.productDescription.memory)}})]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.hasStorage(t.row),expression:"hasStorage(props.row)"}],attrs:{label:"产品容量"}},[r("span",{domProps:{textContent:e._s(t.row.productDescription.storage)}})]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.hasNote(t.row),expression:"hasNote(props.row)"}],attrs:{label:"备注"}},[r("span",{domProps:{textContent:e._s(t.row.note)}})])],1)]}}])}),r("el-table-column",{attrs:{prop:"dateTime",label:"入库日期",width:"160",sortable:""}}),r("el-table-column",{attrs:{prop:"productName",label:"产品名",width:"150"}}),r("el-table-column",{attrs:{prop:"productType[0]",label:"产品类型",formatter:e.translateType,filters:e.typeFilter,"filter-method":e.filterType}}),r("el-table-column",{attrs:{prop:"price",label:"单价",sortable:""}}),r("el-table-column",{attrs:{prop:"num",label:"数量",sortable:""}}),r("el-table-column",{attrs:{prop:"total",label:"总额",sortable:""}}),r("el-table-column",{attrs:{prop:"creator",label:"进货人"}}),r("el-table-column",{attrs:{prop:"contact",label:"联系方式",width:"150"}}),r("el-table-column",{attrs:{prop:"platform",label:"进货平台"}})],1),r("el-pagination",{attrs:{background:"",layout:"prev, pager, next,jumper","page-size":50,total:e.total,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.changePage}})],1)},Ae=[],Ge=(r("4160"),r("159b"),{typeMap:{Other:"其他",Phone:"手机",Pad:"平板电脑",Computer:"电脑",Accessories:"配件",EarPhones:"耳机",Laptop:"笔记本",Desktop:"台式机",Apple:"苹果",Android:"安卓",Windows:"Windows系统",Noiseless:"降噪",Noise:"普通",Wired:"有线",Wireless:"无线",Pen:"手写笔",Charger:"充电器",Mouse:"鼠标",KeyBoard:"键盘"},colorMap:{red:"红色",blue:"蓝色",green:"绿色",yellow:"黄色",purple:"紫色",black:"黑色",silver:"银色",gold:"金色",white:"白色"}}),qe=Ge,Be={name:"SelectableStockList",data:function(){return{stockList:[],currentPage:1,selectedRow:{},total:0,typeFilter:[{text:"手机",value:"Phone"},{text:"平板电脑",value:"Pad"},{text:"电脑",value:"Computer"},{text:"配件",value:"Accessories"},{text:"耳机",value:"EarPhone"},{text:"其他",value:"Other"}]}},methods:{getStockList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post("/api/getStocks",{page:1}).then((function(t){var r=t.data.stockList;r.forEach((function(e){e.checked=!1})),e.stockList=r,console.log("库存列表加载完成！")})).catch((function(t){console.error(t),e.$message.error("加载库存列表失败！")}));case 2:case"end":return t.stop()}}),t)})))()},changePage:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.currentPage=e,r.next=3,t.axios.post("/api/getStocks",{page:e}).then((function(e){t.stockList=e.data.stockList,console.log("表格信息加载完毕！")})).catch((function(e){t.$message.error("获取库存信息失败！"),console.error(e)}));case 3:case"end":return r.stop()}}),r)})))()},filterType:function(e,t){return t.productType[0]===e},translateColor:function(e){return qe.colorMap[e]},translateType:function(e){var t=qe.typeMap;return 1===e.productType.length?t[e.productType[0]]:2===e.productType.length?t[e.productType[1]]+t[e.productType[0]]:t[e.productType[1]]+t[e.productType[2]]+t[e.productType[0]]},handleSelect:function(e,t){var r=this;null===t&&(e.checked=!0,this.$emit("transferSelectedRow",e)),this.stockList.forEach((function(o){e.stockId===o.stockId&&(e.checked=!0,t.checked=!1,r.$emit("transferSelectedRow",e))}))},hasNote:function(e){return!!e.note},hasMemory:function(e){return"Phone"===e.productType||"Computer"===e.productType},hasStorage:function(e){return"Phone"===e.productType||"Computer"===e.productType||"Pad"===e.productType}},mounted:function(){this.getStockList()}},We=Be,ze=Object(f["a"])(We,Le,Ae,!1,null,"b111d0c8",null),Ve=ze.exports,He={name:"OrderForm",components:{SelectableStockList:Ve},data:function(){return{stockTableVisible:!1,loading:!1,max:1,orderForm:{productName:"",productType:[],money:{soldPrice:0,postPrice:0},num:0,productDescription:{color:"",outlook:""},purchaser:"",contact:"",platform:"",note:""},orderRules:{productName:[{required:!0,message:"请输入产品名",trigger:"blur"}],purchaser:[{required:!0,message:"请输入购买人姓名",trigger:"blur"}],productType:[{required:!0,message:"请选择产品类型",trigger:"blur"}],contact:[{required:!0,message:"请输入购买人联系方式",trigger:"blur"}],platform:[{required:!0,message:"请输入出售方式",trigger:"blur"}]},colorMap:qe.colorMap}},methods:{handleNew:function(){var e=this;this.$refs["orderForm"].validate((function(t){if(!t)return console.warn("有东西没好好填"),!1;var r={userId:e.$store.state.user.uid,stock:e.orderForm,stockId:e.stockId};Re.postOrder("/api/addStockOrder",r)}))},getRow:function(e){this.stockId=e.stockId,this.orderForm.productName=e.productName,this.orderForm.productType=e.productType,this.orderForm.productDescription=e.productDescription,this.max=e.num},translateType:function(e){var t=qe.typeMap;return 1===e.length?t[e[0]]?t[e[0]]:e[0]:2===e.length?t[e[1]]+t[e[0]]:t[e[1]]+t[e[2]]+t[e[0]]}}},Ue=He,Je=(r("9bd0"),Object(f["a"])(Ue,Me,Ie,!1,null,"db9941d8",null)),Ke=Je.exports,Ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderList,border:"","row-class-name":e.tableRowClassName}},[e._e(),r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"产品颜色"}},[r("span",{domProps:{textContent:e._s(e.translateColor(t.row.productDescription.color))}})]),r("el-form-item",{attrs:{label:"产品外观"}},[r("span",{domProps:{textContent:e._s(t.row.productDescription.outlook)}})]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.hasMemory(t.row),expression:"hasMemory(props.row)"}],attrs:{label:"产品内存"}},[r("span",{domProps:{textContent:e._s(t.row.productDescription.memory)}})]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.hasStorage(t.row),expression:"hasStorage(props.row)"}],attrs:{label:"产品容量"}},[r("span",{domProps:{textContent:e._s(t.row.productDescription.storage)}})]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.hasNote(t.row),expression:"hasNote(props.row)"}],attrs:{label:"备注"}},[r("span",{domProps:{textContent:e._s(t.row.note)}})])],1)]}}])}),r("el-table-column",{attrs:{prop:"dateTime",label:"日期",width:"160",sortable:""}}),r("el-table-column",{attrs:{prop:"productName",label:"产品名",width:"150"}}),r("el-table-column",{attrs:{prop:"productType",label:"产品类型",formatter:e.translateType}}),r("el-table-column",{attrs:{prop:"purchasePrice",label:"进价",sortable:""}}),r("el-table-column",{attrs:{prop:"soldPrice",label:"售价",sortable:""}}),r("el-table-column",{attrs:{prop:"postPrice",label:"邮费",sortable:""}}),r("el-table-column",{attrs:{prop:"profit",label:"盈利",sortable:""}}),r("el-table-column",{attrs:{prop:"purchaser",label:"购买人"}}),r("el-table-column",{attrs:{prop:"contact",label:"联系方式",width:"150"}}),r("el-table-column",{attrs:{prop:"platform",label:"平台"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("修改")]),r("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),r("el-pagination",{attrs:{background:"",layout:"prev, pager, next,jumper","page-size":50,total:e.total,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.changePage}})],1)},Ye=[],Qe={name:"OrderTable",data:function(){return{orderList:[],currentPage:1,total:0}},methods:{translateColor:function(e){var t=qe.colorMap;return t[e]},translateType:function(e){var t=qe.typeMap;return 1===e.productType.length?t[e.productType[0]]:2===e.productType.length?t[e.productType[1]]+t[e.productType[0]]:t[e.productType[1]]+t[e.productType[2]]+t[e.productType[0]]},hasNote:function(e){return!!e.note},hasMemory:function(e){return"Phone"===e.productType||"Computer"===e.productType},hasStorage:function(e){return"Phone"===e.productType||"Computer"===e.productType||"Pad"===e.productType},tableRowClassName:function(e){var t=e.row;return t.profit<100?"loss-row":t.profit>200?"earn-row":""},handleEdit:function(e){var t=this;this.$confirm("确认修改？","提示",{confirmButtonText:"确认修改",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push({path:"/dashboard/editOrder",query:{orderId:e.orderId}})})).catch((function(e){console.error(e)}))},handleDelete:function(e){this.$confirm("确定删除?","提示",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"warning"}).then((function(){Re.deleteOrder("/api/delOrder",{orderId:e.orderId}),window.location.reload()})).catch((function(e){console.error(e)}))},changePage:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.currentPage=e,r.next=3,t.axios.post("/api/getOrders",{page:e}).then((function(e){t.orderList=e.data.orderList,console.log("表格信息加载完毕！")})).catch((function(e){t.$message.error("获取订单信息失败！"),console.error(e)}));case 3:case"end":return r.stop()}}),r)})))()}},mounted:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.post("/api/getOrders",{page:1}).then((function(t){e.orderList=t.data.orderList,e.total=t.data.total,console.log("表格信息加载完毕！")})).catch((function(t){e.$message.error("获取订单信息失败！"),console.error(t)}));case 2:case"end":return t.stop()}}),t)})))()}},Xe=Qe,et=(r("9251"),Object(f["a"])(Xe,Ze,Ye,!1,null,null,null)),tt=et.exports,rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"orderForm",attrs:{model:e.orderForm,"label-width":"120px","label-position":"right",rules:e.orderRules}},[r("el-form-item",{attrs:{label:"商品名",prop:"productName"}},[r("el-input",{model:{value:e.orderForm.productName,callback:function(t){e.$set(e.orderForm,"productName",t)},expression:"orderForm.productName"}})],1),r("ProductType",{attrs:{ajaxType:e.orderForm.productType},on:{transferProductType:e.getProductType}}),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"进价"}},[r("el-input-number",{attrs:{precision:2,step:.01,"controls-position":"right",min:0},model:{value:e.orderForm.money.purchasePrice,callback:function(t){e.$set(e.orderForm.money,"purchasePrice",t)},expression:"orderForm.money.purchasePrice"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"售价"}},[r("el-input-number",{attrs:{precision:2,step:.01,"controls-position":"right",min:0},model:{value:e.orderForm.money.soldPrice,callback:function(t){e.$set(e.orderForm.money,"soldPrice",t)},expression:"orderForm.money.soldPrice"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"邮费"}},[r("el-input-number",{attrs:{precision:2,step:.01,"controls-position":"right",min:0},model:{value:e.orderForm.money.postPrice,callback:function(t){e.$set(e.orderForm.money,"postPrice",t)},expression:"orderForm.money.postPrice"}})],1)],1)],1),r("el-form-item",{staticClass:"productDescription",attrs:{label:"产品描述","label-width":"130px"}}),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"颜色",prop:"color"}},[r("el-select",{attrs:{clearable:""},model:{value:e.orderForm.productDescription.color,callback:function(t){e.$set(e.orderForm.productDescription,"color",t)},expression:"orderForm.productDescription.color"}},e._l(e.colors,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"成色",prop:"outlook"}},[r("el-input",{model:{value:e.orderForm.productDescription.outlook,callback:function(t){e.$set(e.orderForm.productDescription,"outlook",t)},expression:"orderForm.productDescription.outlook"}})],1)],1)],1),r("ProductMemory",{attrs:{productType:e.orderForm.productType[0],ajaxMemo:e.orderForm.productDescription.memory},on:{transferMemory:e.getMemory}}),r("ProductStorage",{attrs:{productType:e.orderForm.productType[0],ajaxStorage:e.orderForm.productDescription.storage},on:{transferStorage:e.getStorage}}),r("el-form-item",{attrs:{label:"购买人姓名",prop:"purchaser"}},[r("el-input",{model:{value:e.orderForm.purchaser,callback:function(t){e.$set(e.orderForm,"purchaser",t)},expression:"orderForm.purchaser"}})],1),r("el-form-item",{attrs:{label:"购买人联系方式",prop:"contact","label-width":"130px"}},[r("el-input",{model:{value:e.orderForm.contact,callback:function(t){e.$set(e.orderForm,"contact",t)},expression:"orderForm.contact"}})],1),r("el-form-item",{attrs:{label:"出售方式",prop:"platform"}},[r("el-input",{model:{value:e.orderForm.platform,callback:function(t){e.$set(e.orderForm,"platform",t)},expression:"orderForm.platform"}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.orderForm.note,callback:function(t){e.$set(e.orderForm,"note",t)},expression:"orderForm.note"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"warning"},on:{click:e.handleEdit}},[e._v("修改订单")])],1)],1)},ot=[],at=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form-item",{attrs:{label:"产品类型",prop:"productType"}},[r("el-cascader",{attrs:{options:e.types,props:e.expandTrigger},on:{change:e.transferProductType},model:{value:e.productType,callback:function(t){e.productType=t},expression:"productType"}})],1)},nt=[],st=(r("99af"),{name:"ProductType",data:function(){return{productType:[],types:[{value:"Phone",label:"手机",children:[{value:"Apple",label:"苹果手机"},{value:"Android",label:"安卓手机"}]},{value:"Pad",label:"平板电脑"},{value:"Computer",label:"电脑",children:[{value:"Laptop",label:"笔记本",children:[{value:"Windows",label:"Windows系统"},{value:"Apple",label:"Mac系统"}]},{value:"Desktop",label:"台式机",children:[{value:"Windows",label:"Windows系统"},{value:"Apple",label:"Mac系统"}]}]},{value:"Accessories",label:"配件",children:[{value:"Pen",label:"手写笔"},{value:"Charger",label:"充电器"},{value:"Mouse",label:"鼠标"},{value:"KeyBoard",label:"键盘"}]},{value:"EarPhones",label:"耳机",children:[{value:"Wireless",label:"无线耳机",children:[{value:"Noiseless",label:"降噪"},{value:"Noise",label:"非降噪"}]},{value:"Wired",label:"有线耳机",children:[{value:"Noiseless",label:"降噪"},{value:"Noise",label:"非降噪"}]}]},{value:"Other",label:"其他"}],expandTrigger:{expandTrigger:"hover"}}},methods:{transferProductType:function(){this.$emit("transferProductType",this.productType)}},props:["ajaxType"],watch:{ajaxType:function(e){this.productType=this.productType.concat(e)}}}),lt=st,it=Object(f["a"])(lt,at,nt,!1,null,"2b2f16ba",null),ct=it.exports,ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.hasMemory,expression:"hasMemory"}],attrs:{label:"内存大小"}},[e.isMemoryOf("Phone")?r("el-radio-group",{key:"Phone",on:{change:e.handleChange},model:{value:e.memory,callback:function(t){e.memory=t},expression:"memory"}},[r("el-radio",{attrs:{label:"4G"}},[e._v("4G")]),r("el-radio",{attrs:{label:"6G"}},[e._v("6G")]),r("el-radio",{attrs:{label:"8G"}},[e._v("8G")]),r("el-radio",{attrs:{label:"12G"}},[e._v("12G")])],1):e.isMemoryOf("Computer")?r("el-radio-group",{key:"Computer",on:{change:e.handleChange},model:{value:e.memory,callback:function(t){e.memory=t},expression:"memory"}},[r("el-radio",{attrs:{label:"4G"}},[e._v("4G")]),r("el-radio",{attrs:{label:"8G"}},[e._v("8G")]),r("el-radio",{attrs:{label:"16G"}},[e._v("16G")]),r("el-radio",{attrs:{label:"32G"}},[e._v("32G")])],1):e._e()],1)},pt=[],dt={name:"ProductMemory",props:["productType","ajaxMemo"],data:function(){return{memory:""}},computed:{hasMemory:function(){return!!this.productType&&("Phone"===this.productType||"Computer"===this.productType)},isMemoryOf:function(){return function(e){return e===this.productType}}},methods:{handleChange:function(){this.$emit("transferMemory",this.memory)}},watch:{ajaxMemo:function(e){this.memory=e}}},mt=dt,ft=Object(f["a"])(mt,ut,pt,!1,null,"12f5cc04",null),ht=ft.exports,gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.hasStorage?r("el-form-item",{attrs:{label:"容量"}},[e.isStorageOf("Phone")?r("el-radio-group",{on:{change:e.handleChange},model:{value:e.storage,callback:function(t){e.storage=t},expression:"storage"}},[r("el-radio",{attrs:{label:"64G"}},[e._v("64G")]),r("el-radio",{attrs:{label:"128G"}},[e._v("128G")]),r("el-radio",{attrs:{label:"512G"}},[e._v("512G")]),r("el-radio",{attrs:{label:"256G"}},[e._v("256G")])],1):e._e(),e.isStorageOf("Computer")?r("el-radio-group",{on:{change:e.handleChange},model:{value:e.storage,callback:function(t){e.storage=t},expression:"storage"}},[r("el-radio",{attrs:{label:"128G"}},[e._v("128G")]),r("el-radio",{attrs:{label:"256G"}},[e._v("256G")]),r("el-radio",{attrs:{label:"512G"}},[e._v("512G")]),r("el-radio",{attrs:{label:"1T"}},[e._v("1T")])],1):e._e(),e.isStorageOf("Pad")?r("el-radio-group",{on:{change:e.handleChange},model:{value:e.storage,callback:function(t){e.storage=t},expression:"storage"}},[r("el-radio",{attrs:{label:"64G"}},[e._v("64G")]),r("el-radio",{attrs:{label:"128G"}},[e._v("128G")]),r("el-radio",{attrs:{label:"256G"}},[e._v("256G")]),r("el-radio",{attrs:{label:"512G"}},[e._v("512G")]),r("el-radio",{attrs:{label:"1T"}},[e._v("1T")])],1):e._e()],1):e._e()},bt=[],vt={name:"ProductStorage",props:["productType","ajaxStorage"],data:function(){return{storage:""}},computed:{hasStorage:function(){return!!this.productType&&"Accessories"!==this.productType&&"EarPhone"!==this.productType&&"Other"!==this.productType},isStorageOf:function(){return function(e){return e===this.productType}}},methods:{handleChange:function(){this.$emit("transferStorage",this.storage)}},watch:{ajaxStorage:function(e){this.storage=e}}},wt=vt,yt=Object(f["a"])(wt,gt,bt,!1,null,"649516ce",null),xt=yt.exports,kt={name:"EditOrder",components:{ProductType:ct,ProductMemory:ht,ProductStorage:xt},data:function(){return{loading:!1,orderForm:{productName:"",productType:[],money:{purchasePrice:0,soldPrice:0,postPrice:0},productDescription:{color:"",outlook:""},purchaser:"",contact:"",platform:"",note:""},orderRules:{productName:[{required:!0,message:"请输入产品名",trigger:"blur"}],purchaser:[{required:!0,message:"请输入购买人姓名",trigger:"blur"}],productType:[{required:!0,message:"请选择产品类型",trigger:"blur"}],contact:[{required:!0,message:"请输入购买人联系方式",trigger:"blur"}],platform:[{required:!0,message:"请输入出售方式",trigger:"blur"}]},colors:[{value:"black",label:"黑色"},{value:"silver",label:"银色"},{value:"gold",label:"金色"},{value:"blue",label:"蓝色"},{value:"red",label:"红色"},{value:"green",label:"绿色"},{value:"purple",label:"紫色"},{value:"yellow",label:"黄色"}]}},methods:{handleEdit:function(){var e=this;this.$confirm("真的要修改么？","提示",{confirmButtonText:"真的要修改！",cancelButtonText:"算了吧..",type:"warning"}).then((function(){var t={userId:e.$store.state.user.user.uid,orderId:e.$route.query.orderId,order:e.orderForm};e.axios.put("/api/editOrderInfo",t).then((function(t){"success"===t.data.status?(e.$message.success("修改订单信息成功！"),e.$router.push("/dashboard/orderList")):e.$message.error("修改订单信息失败！")})).catch((function(t){console.error(t),e.$message.error("系统错误！"),e.$router.push("/dashboard/orderList")}))})).catch((function(){e.$message.info("已取消"),e.$router.push("/dashboard/orderList")}))},getProductType:function(e){this.orderForm.productType=e},getStorage:function(e){this.orderForm.productDescription.storage=e},getMemory:function(e){this.orderForm.productDescription.memory=e}},mounted:function(){var e=this,t=this.$route.query.orderId;this.axios.post("/api/getOrderInfo",{orderId:t}).then((function(t){e.orderForm=t.data.order,e.orderForm.withAccessories=Boolean(t.data.order.withAccessories)})).catch((function(t){404===t.response.status&&(e.$message.error("订单不存在！"),e.$router.push("/dashboard/orderList")),console.error(t),e.$message.error("加载订单信息失败！"),e.$router.push("/dashboard/orderList")}))}},Ft=kt,Pt=Object(f["a"])(Ft,rt,ot,!1,null,"558b9a76",null),Tt=Pt.exports,_t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"itemForm",attrs:{model:e.itemForm,"label-width":"130px","label-position":"right",rules:e.itemRules}},[r("el-form-item",{attrs:{label:"商品名",prop:"productName"}},[r("el-input",{model:{value:e.itemForm.productName,callback:function(t){e.$set(e.itemForm,"productName",t)},expression:"itemForm.productName"}})],1),r("ProductType",{on:{transferProductType:e.getProductType}}),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"单价"}},[r("el-input-number",{attrs:{precision:2,step:.01,"controls-position":"right",min:0},model:{value:e.itemForm.money.price,callback:function(t){e.$set(e.itemForm.money,"price",t)},expression:"itemForm.money.price"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"数量"}},[r("el-input-number",{attrs:{step:1,"controls-position":"right",min:0},model:{value:e.itemForm.money.num,callback:function(t){e.$set(e.itemForm.money,"num",t)},expression:"itemForm.money.num"}})],1)],1)],1),r("el-form-item",{staticClass:"productDescription",attrs:{label:"产品描述","label-width":"130px"}},["Other"==e.itemForm.productType[0]?r("el-input",{model:{value:e.itemForm.productDescription.description,callback:function(t){e.$set(e.itemForm.productDescription,"description",t)},expression:"itemForm.productDescription.description"}}):e._e()],1),"Other"!=e.itemForm.productType[0]?r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"颜色",prop:"color"}},[r("el-select",{attrs:{clearable:""},model:{value:e.itemForm.productDescription.color,callback:function(t){e.$set(e.itemForm.productDescription,"color",t)},expression:"itemForm.productDescription.color"}},e._l(e.colors,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"成色",prop:"outlook"}},[r("el-input",{model:{value:e.itemForm.productDescription.outlook,callback:function(t){e.$set(e.itemForm.productDescription,"outlook",t)},expression:"itemForm.productDescription.outlook"}})],1)],1)],1):e._e(),r("ProductMemory",{attrs:{productType:e.itemForm.productType[0]},on:{transferMemory:e.getMemory}}),r("ProductStorage",{attrs:{productType:e.itemForm.productType[0]},on:{transferStorage:e.getStorage}}),r("el-form-item",{attrs:{label:"进货人",prop:"creator"}},[r("el-input",{model:{value:e.itemForm.creator,callback:function(t){e.$set(e.itemForm,"creator",t)},expression:"itemForm.creator"}})],1),r("el-form-item",{attrs:{label:"进货人联系方式",prop:"contact"}},[r("el-input",{model:{value:e.itemForm.contact,callback:function(t){e.$set(e.itemForm,"contact",t)},expression:"itemForm.contact"}})],1),r("el-form-item",{attrs:{label:"进货渠道",prop:"platform"}},[r("el-input",{model:{value:e.itemForm.platform,callback:function(t){e.$set(e.itemForm,"platform",t)},expression:"itemForm.platform"}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.itemForm.note,callback:function(t){e.$set(e.itemForm,"note",t)},expression:"itemForm.note"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleNew}},[e._v("入库")])],1)],1)},$t=[],Dt={postStock:function(e,t){return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,c.a.post(e,t).then((function(e){"success"===e.data.status&&(a["Message"].success("商品已入库！"),window.location.reload())})).catch((function(e){console.error(e),a["Message"].error("入库失败！")}));case 2:case"end":return r.stop()}}),r)})))()},editStock:function(e,t){return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,c.a.put(e,t).then((function(e){"success"===e.data.status&&(a["Message"].success("修改库存成功"),br.push("/dashboard/stockList"))})).catch((function(e){console.error(e),502===e.response.status?a["Message"].error(e.response.data.reason):a["Message"].error("系统错误！")}));case 2:case"end":return r.stop()}}),r)})))()}},St=Dt,Ct={name:"NewStock",components:{ProductMemory:ht,ProductStorage:xt,ProductType:ct},data:function(){return{loading:!1,itemForm:{productName:"",productType:[],money:{num:0,price:0},productDescription:{color:"",outlook:""},creator:"",contact:"",platform:"",note:""},itemRules:{productName:[{required:!0,message:"请输入产品名",trigger:"blur"}],creator:[{required:!0,message:"请输入进货人姓名",trigger:"blur"}],productType:[{required:!0,message:"请选择产品类型",trigger:"blur"}],contact:[{required:!0,message:"请输入进货人联系方式",trigger:"blur"}],platform:[{required:!0,message:"请输入进货渠道",trigger:"blur"}]},colors:[{value:"black",label:"黑色"},{value:"silver",label:"银色"},{value:"gold",label:"金色"},{value:"white",label:"白色"},{value:"blue",label:"蓝色"},{value:"red",label:"红色"},{value:"green",label:"绿色"},{value:"purple",label:"紫色"},{value:"yellow",label:"黄色"}]}},methods:{handleNew:function(){var e=this;this.$refs["itemForm"].validate((function(t){if(!t)return console.warn("有东西没好好填"),!1;e.loading=!0;var r={userId:e.$store.state.user.uid,stock:e.itemForm};St.postStock("/api/addStock",r),e.loading=!1}))},getProductType:function(e){this.itemForm.productType=e},getStorage:function(e){this.itemForm.productDescription.storage=e},getMemory:function(e){this.itemForm.productDescription.memory=e}}},Et=Ct,Ot=Object(f["a"])(Et,_t,$t,!1,null,"06888834",null),Nt=Ot.exports,Mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.stockList,border:""}},[e._e(),r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!!t.row.productDescription.color,expression:"!!props.row.productDescription.color"}],attrs:{label:"产品颜色"}},[r("span",{domProps:{textContent:e._s(e.translateColor(t.row.productDescription.color))}})]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!!t.row.productDescription.outlook,expression:"!!props.row.productDescription.outlook"}],attrs:{label:"产品外观"}},[r("span",{domProps:{textContent:e._s(t.row.productDescription.outlook)}})]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!!t.row.productDescription.description,expression:"!!props.row.productDescription.description"}],attrs:{label:"产品描述"}},[r("span",{domProps:{textContent:e._s(t.row.productDescription.description)}})]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.hasMemory(t.row),expression:"hasMemory(props.row)"}],attrs:{label:"产品内存"}},[r("span",{domProps:{textContent:e._s(t.row.productDescription.memory)}})]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.hasStorage(t.row),expression:"hasStorage(props.row)"}],attrs:{label:"产品容量"}},[r("span",{domProps:{textContent:e._s(t.row.productDescription.storage)}})]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.hasNote(t.row),expression:"hasNote(props.row)"}],attrs:{label:"备注"}},[r("span",{domProps:{textContent:e._s(t.row.note)}})])],1)]}}])}),r("el-table-column",{attrs:{prop:"dateTime",label:"入库日期",width:"160",sortable:""}}),r("el-table-column",{attrs:{prop:"productName",label:"产品名","min-width":"150"}}),r("el-table-column",{attrs:{prop:"productType[0]",label:"产品类型",formatter:e.translateType,filters:e.typeFilter,"filter-method":e.filterType}}),r("el-table-column",{attrs:{prop:"price",label:"单价",sortable:""}}),r("el-table-column",{attrs:{prop:"num",label:"数量",sortable:""}}),r("el-table-column",{attrs:{prop:"total",label:"总额",sortable:""}}),r("el-table-column",{attrs:{prop:"creator",label:"进货人"}}),r("el-table-column",{attrs:{prop:"contact",label:"联系方式",width:"150"}}),r("el-table-column",{attrs:{prop:"platform",label:"进货平台"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("修改")])]}}])})],1),r("el-pagination",{attrs:{background:"",layout:"prev, pager, next,jumper","page-size":50,total:e.stockNum,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.changePage}})],1)},It=[],jt={name:"StockList",data:function(){return{stockList:[],currentPage:1,stockNum:0,typeFilter:[{text:"手机",value:"Phone"},{text:"平板电脑",value:"Pad"},{text:"电脑",value:"Computer"},{text:"配件",value:"Accessories"},{text:"耳机",value:"EarPhones"},{text:"其他",value:"Other"}]}},methods:{getStockList:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.axios.post("/api/getStocks",{page:e}).then((function(e){t.stockList=e.data.stockList,t.stockNum=e.data.stockNum,console.log("库存列表加载完成！")})).catch((function(e){console.error(e),t.$message.error("加载库存列表失败！")}));case 2:case"end":return r.stop()}}),r)})))()},changePage:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.currentPage=e,t.getStockList(t.currentPage);case 2:case"end":return r.stop()}}),r)})))()},handleEdit:function(e){var t=this;this.$confirm("确认修改？","提示",{confirmButtonText:"确认修改",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push({path:"/dashboard/editStock",query:{stockId:e.stockId}})})).catch((function(e){console.error(e)}))},filterType:function(e,t){return t.productType[0]===e},translateColor:function(e){return qe.colorMap[e]},translateType:function(e){var t=qe.typeMap;return 1===e.productType.length?t[e.productType[0]]:2===e.productType.length?t[e.productType[1]]+t[e.productType[0]]:t[e.productType[1]]+t[e.productType[2]]+t[e.productType[0]]},hasNote:function(e){return!!e.note},hasMemory:function(e){return"Phone"===e.productType||"Computer"===e.productType},hasStorage:function(e){return"Phone"===e.productType||"Computer"===e.productType||"Pad"===e.productType}},mounted:function(){this.getStockList(1)}},Rt=jt,Lt=Object(f["a"])(Rt,Mt,It,!1,null,"708e3888",null),At=Lt.exports,Gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{staticClass:"stock-overview",attrs:{inline:""}},[r("el-form-item",{attrs:{label:"库存总量:"}},[r("span",{domProps:{textContent:e._s(e.num)}})]),r("el-form-item",{attrs:{label:"库存总进价:"}},[r("span",{domProps:{textContent:e._s(e.total)}}),e._v("（元）")])],1),r("v-chart",{attrs:{options:e.stockData}})],1)},qt=[];o["default"].component("v-chart",xe["a"]);var Bt={name:"StockGraph",data:function(){return{stockData:{title:{text:"库存"},legend:{show:!0,data:["库存","金额"]},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",name:"库存数量",min:0,axisLabel:{formatter:"{value}"},nameLocation:"center",nameGap:65},{type:"value",name:"金额/CYN",axisLabel:{formatter:"{value}"},nameLocation:"center",nameGap:65,nameRotate:-90}],toolbox:{show:!0,top:-6,feature:{saveAsImage:{show:!0},restore:{show:!0}}},series:[{name:"库存",type:"bar",barGap:0,label:{show:!0,position:"insideTop"},data:[]},{name:"金额",type:"bar",yAxisIndex:1,barGap:0,label:{show:!0,position:"insideTop"},data:[]}]},num:0,total:0}},methods:{getStockData:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=qe.typeMap,t.next=3,e.axios.get("/api/stock").then((function(t){e.stockData.xAxis[0].data=t.data.types.map((function(e){return r[e]})),e.stockData.series[0].data=t.data.num,e.stockData.series[1].data=t.data.total,e.num=t.data.overview.num,e.total=t.data.overview.total,console.log("库存图表加载成功！")})).catch((function(t){console.error(t),e.$message.error("获取库存信息失败！")}));case 3:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getStockData()}},Wt=Bt,zt=(r("dc96"),Object(f["a"])(Wt,Gt,qt,!1,null,null,null)),Vt=zt.exports,Ht=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{staticClass:"fund-overview",attrs:{inline:""}},[r("el-form-item",{attrs:{label:"库存总金额:"}},[r("span",{domProps:{textContent:e._s(e.fundData.series[0].data[0].value)}}),e._v("（元）")]),r("el-form-item",{attrs:{label:"销售总金额:"}},[r("span",{domProps:{textContent:e._s(this.fundData.series[0].data[1].value)}}),e._v("（元）")])],1),r("v-chart",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{options:e.fundData}})],1)},Ut=[];r("c037"),r("007d");o["default"].component("v-chart",xe["a"]);var Jt={name:"FundGraph",data:function(){return{loading:!1,fundData:{title:{text:"资金"},legend:{bottom:5,orient:"vertical",left:10,data:["库存总金额","销售总金额","已售产品售价","已售产品邮费","总盈利"]},toolbox:{show:!0,top:-6,feature:{saveAsImage:{show:!0},restore:{show:!0}}},series:[{type:"pie",radius:[0,"60%"],label:{position:"inner",formatter:"{b}:{c}元({d}%)"},data:[{value:0,name:"库存总金额"},{value:0,name:"销售总金额"}]},{type:"pie",radius:["70%","85%"],label:{position:"outside",formatter:"{b}:{c}元({d}%)"},data:[{value:0,name:"库存总金额"},{value:0,name:"已售产品售价"},{value:0,name:"已售产品邮费"},{value:0,name:"总盈利"}]}]}}},methods:{getFundData:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("/api/money").then((function(t){e.fundData.series[0].data[0].value=t.data.stockMoney,e.fundData.series[0].data[1].value=t.data.orderSold,e.fundData.series[1].data[0].value=t.data.stockMoney,e.fundData.series[1].data[1].value=t.data.orderPurchase,e.fundData.series[1].data[2].value=t.data.orderPost,e.fundData.series[1].data[3].value=t.data.orderProfit})).catch((function(t){console.error(t),e.$message.error("资金图表加载失败！")}));case 2:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.loading=!0,this.getFundData(),this.loading=!1}},Kt=Jt,Zt=(r("5edf"),Object(f["a"])(Kt,Ht,Ut,!1,null,null,null)),Yt=Zt.exports,Qt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fundTable,border:"","row-class-name":e.tableRowClassName}},[e._e(),r("el-table-column",{attrs:{prop:"dateTime",label:"日期",width:"160px",sortable:""}}),r("el-table-column",{attrs:{prop:"productName",label:"产品名称","min-width":"150px"}}),r("el-table-column",{attrs:{prop:"productType",label:"产品类型",formatter:e.translateType,filters:e.typeFilter,"filter-method":e.filterType}}),r("el-table-column",{attrs:{prop:"money",label:"金额",formatter:e.moneyFormatter,sortable:""}})],1),r("el-pagination",{attrs:{background:"",layout:"prev, pager, next,jumper","page-size":50,total:e.total,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.changePage}})],1)},Xt=[],er={name:"Flow",data:function(){return{currentPage:1,total:0,fundTable:[],typeFilter:[{text:"手机",value:"Phone"},{text:"平板电脑",value:"Pad"},{text:"电脑",value:"Computer"},{text:"配件",value:"Accessories"},{text:"耳机",value:"EarPhones"},{text:"其他",value:"Other"}]}},methods:{changePage:function(e){this.currentPage=e,this.getFlowData(this.currentPage)},getFlowData:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.axios.post("/api/moneyDetail",{page:e}).then((function(e){t.total=e.data.num,t.fundTable=e.data.moneyDetail,console.log("流水加载成功")})).catch((function(e){console.error(e),t.$message.error("流水明细加载失败！")}));case 2:case"end":return r.stop()}}),r)})))()},filterType:function(e,t){return t.productType[0]===e},translateType:function(e){var t=qe.typeMap;return 1===e.productType.length?t[e.productType[0]]:2===e.productType.length?t[e.productType[1]]+t[e.productType[0]]:t[e.productType[1]]+t[e.productType[2]]+t[e.productType[0]]},moneyFormatter:function(e){return"in"===e.type?e.money:0-e.money},tableRowClassName:function(e){var t=e.row;return"in"===t.type?"earn-row":"loss-row"}},mounted:function(){this.getFlowData(1)}},tr=er,rr=(r("271a"),Object(f["a"])(tr,Qt,Xt,!1,null,"9c957a1c",null)),or=rr.exports,ar=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"orderForm",attrs:{model:e.orderForm,"label-width":"120px","label-position":"right",rules:e.orderRules}},[r("el-form-item",{attrs:{label:"商品名",prop:"productName"}},[r("el-input",{model:{value:e.orderForm.productName,callback:function(t){e.$set(e.orderForm,"productName",t)},expression:"orderForm.productName"}})],1),r("ProductType",{on:{transferProductType:e.getProductType}}),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"进价"}},[r("el-input-number",{attrs:{precision:2,step:.01,"controls-position":"right",min:0},model:{value:e.orderForm.money.purchasePrice,callback:function(t){e.$set(e.orderForm.money,"purchasePrice",t)},expression:"orderForm.money.purchasePrice"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"售价"}},[r("el-input-number",{attrs:{precision:2,step:.01,"controls-position":"right",min:0},model:{value:e.orderForm.money.soldPrice,callback:function(t){e.$set(e.orderForm.money,"soldPrice",t)},expression:"orderForm.money.soldPrice"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"邮费"}},[r("el-input-number",{attrs:{precision:2,step:.01,"controls-position":"right",min:0},model:{value:e.orderForm.money.postPrice,callback:function(t){e.$set(e.orderForm.money,"postPrice",t)},expression:"orderForm.money.postPrice"}})],1)],1)],1),r("el-form-item",{staticClass:"productDescription",attrs:{label:"产品描述","label-width":"130px"}},[r("el-input",{model:{value:e.orderForm.productDescription.description,callback:function(t){e.$set(e.orderForm.productDescription,"description",t)},expression:"orderForm.productDescription.description"}})],1),r("el-form-item",{attrs:{label:"购买人姓名",prop:"purchaser"}},[r("el-input",{model:{value:e.orderForm.purchaser,callback:function(t){e.$set(e.orderForm,"purchaser",t)},expression:"orderForm.purchaser"}})],1),r("el-form-item",{attrs:{label:"购买人联系方式",prop:"contact","label-width":"130px"}},[r("el-input",{model:{value:e.orderForm.contact,callback:function(t){e.$set(e.orderForm,"contact",t)},expression:"orderForm.contact"}})],1),r("el-form-item",{attrs:{label:"出售方式",prop:"platform"}},[r("el-input",{model:{value:e.orderForm.platform,callback:function(t){e.$set(e.orderForm,"platform",t)},expression:"orderForm.platform"}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.orderForm.note,callback:function(t){e.$set(e.orderForm,"note",t)},expression:"orderForm.note"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleNew}},[e._v("新建订单")])],1)],1)},nr=[],sr={name:"NewOrder",components:{ProductType:ct},data:function(){return{loading:!1,orderForm:{productName:"",productType:[],money:{purchasePrice:0,soldPrice:0,postPrice:0},productDescription:{description:""},purchaser:"",contact:"",platform:"",note:""},orderRules:{productName:[{required:!0,message:"请输入产品名",trigger:"blur"}],purchaser:[{required:!0,message:"请输入购买人姓名",trigger:"blur"}],productType:[{required:!0,message:"请选择产品类型",trigger:"blur"}],contact:[{required:!0,message:"请输入购买人联系方式",trigger:"blur"}],platform:[{required:!0,message:"请输入出售方式",trigger:"blur"}]}}},methods:{handleNew:function(){var e=this;this.$refs["orderForm"].validate((function(t){if(!t)return console.warn("有东西没好好填"),!1;var r={userId:e.$store.state.user.uid,order:e.orderForm};Re.postOrder("/api/addOtherOrder",r)}))},getProductType:function(e){this.orderForm.productType=e}}},lr=sr,ir=Object(f["a"])(lr,ar,nr,!1,null,"d29155c8",null),cr=ir.exports,ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"stockEditForm",attrs:{model:e.stockEditForm,"label-width":"130px","label-position":"right",rules:e.itemRules}},[r("el-form-item",{attrs:{label:"商品名",prop:"productName"}},[r("el-input",{model:{value:e.stockEditForm.productName,callback:function(t){e.$set(e.stockEditForm,"productName",t)},expression:"stockEditForm.productName"}})],1),r("ProductType",{attrs:{ajaxType:e.stockEditForm.productType},on:{transferProductType:e.getProductType}}),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"单价"}},[r("el-input-number",{attrs:{precision:2,step:.01,"controls-position":"right",min:0},model:{value:e.stockEditForm.money.price,callback:function(t){e.$set(e.stockEditForm.money,"price",t)},expression:"stockEditForm.money.price"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"数量"}},[r("el-input-number",{attrs:{step:1,"controls-position":"right",min:0},model:{value:e.stockEditForm.money.num,callback:function(t){e.$set(e.stockEditForm.money,"num",t)},expression:"stockEditForm.money.num"}})],1)],1)],1),r("el-form-item",{staticClass:"productDescription",attrs:{label:"产品描述","label-width":"130px"}},["Other"==e.stockEditForm.productType[0]?r("el-input",{model:{value:e.stockEditForm.productDescription.description,callback:function(t){e.$set(e.stockEditForm.productDescription,"description",t)},expression:"stockEditForm.productDescription.description"}}):e._e()],1),"Other"!=e.stockEditForm.productType[0]?r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"颜色",prop:"color"}},[r("el-select",{attrs:{clearable:""},model:{value:e.stockEditForm.productDescription.color,callback:function(t){e.$set(e.stockEditForm.productDescription,"color",t)},expression:"stockEditForm.productDescription.color"}},e._l(e.colors,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"成色",prop:"outlook"}},[r("el-input",{model:{value:e.stockEditForm.productDescription.outlook,callback:function(t){e.$set(e.stockEditForm.productDescription,"outlook",t)},expression:"stockEditForm.productDescription.outlook"}})],1)],1)],1):e._e(),r("ProductMemory",{attrs:{productType:e.stockEditForm.productType[0],ajaxMemo:e.stockEditForm.productDescription.memory},on:{transferMemory:e.getMemory}}),r("ProductStorage",{attrs:{productType:e.stockEditForm.productType[0],ajaxStorage:e.stockEditForm.productDescription.storage},on:{transferStorage:e.getStorage}}),r("el-form-item",{attrs:{label:"进货人",prop:"creator"}},[r("el-input",{model:{value:e.stockEditForm.creator,callback:function(t){e.$set(e.stockEditForm,"creator",t)},expression:"stockEditForm.creator"}})],1),r("el-form-item",{attrs:{label:"进货人联系方式",prop:"contact"}},[r("el-input",{model:{value:e.stockEditForm.contact,callback:function(t){e.$set(e.stockEditForm,"contact",t)},expression:"stockEditForm.contact"}})],1),r("el-form-item",{attrs:{label:"进货渠道",prop:"platform"}},[r("el-input",{model:{value:e.stockEditForm.platform,callback:function(t){e.$set(e.stockEditForm,"platform",t)},expression:"stockEditForm.platform"}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.stockEditForm.note,callback:function(t){e.$set(e.stockEditForm,"note",t)},expression:"stockEditForm.note"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("修改")])],1)],1)},pr=[],dr={name:"EditStock",components:{ProductMemory:ht,ProductStorage:xt,ProductType:ct},data:function(){return{loading:!1,stockEditForm:{productName:"",productType:[],money:{num:0,price:0},productDescription:{color:"",outlook:""},creator:"",contact:"",platform:"",note:""},itemRules:{productName:[{required:!0,message:"请输入产品名",trigger:"blur"}],creator:[{required:!0,message:"请输入进货人姓名",trigger:"blur"}],productType:[{required:!0,message:"请选择产品类型",trigger:"blur"}],contact:[{required:!0,message:"请输入进货人联系方式",trigger:"blur"}],platform:[{required:!0,message:"请输入进货渠道",trigger:"blur"}]},colors:[{value:"black",label:"黑色"},{value:"silver",label:"银色"},{value:"gold",label:"金色"},{value:"white",label:"白色"},{value:"blue",label:"蓝色"},{value:"red",label:"红色"},{value:"green",label:"绿色"},{value:"purple",label:"紫色"},{value:"yellow",label:"黄色"}]}},methods:{handleEdit:function(){var e=this;this.$refs["stockEditForm"].validate((function(t){if(!t)return console.warn("有东西没好好填"),!1;e.$confirm("真的要修改么？","提示",{confirmButtonText:"真的要修改！",cancelButtonText:"算了吧..",type:"warning"}).then((function(){e.loading=!0;var t={userId:e.$store.state.user.uid,stockId:e.$route.query.stockId,stock:e.stockEditForm};St.editStock("/api/editStockInfo",t),e.loading=!1})).catch((function(){e.$message.info("已取消"),e.$router.push("/dashboard/stockList")}))}))},getProductType:function(e){this.stockEditForm.productType=e},getStorage:function(e){this.stockEditForm.productDescription.storage=e},getMemory:function(e){this.stockEditForm.productDescription.memory=e}},mounted:function(){var e=this,t=this.$route.query.stockId;this.axios.post("/api/getStockInfo",{stockId:t}).then((function(t){e.stockEditForm=t.data.stock})).catch((function(t){404===t.response.status&&(e.$message.error("库存不存在！"),e.$router.push("/dashboard/stockList")),console.error(t),e.$message.error("加载库存信息失败！"),e.$router.push("/dashboard/stockList")}))}},mr=dr,fr=Object(f["a"])(mr,ur,pr,!1,null,"6fa5250c",null),hr=fr.exports;o["default"].use(s["a"]);var gr=[{path:"/",component:ve,name:"Index",redirect:"/login",children:[{path:"/login",component:F,name:"login",hidden:!0}]},{path:"/dashboard",component:pe,name:"Home",redirect:"/dashboard/index",children:[{path:"/dashboard/profile",component:I,name:"profile"},{path:"/dashboard/index",component:Te,name:"console"},{path:"/dashboard/newStorageOrder",component:Ke,name:"newStorageOrder"},{path:"/dashboard/newOrder",component:cr,name:"newOrder"},{path:"/dashboard/orderList",component:tt,name:"orderList"},{path:"/dashboard/editOrder",component:Tt,name:"editOrder"},{path:"/dashboard/newStock",component:Nt,name:"newStock"},{path:"/dashboard/editStock",component:hr,name:"editStock"},{path:"/dashboard/stockList",component:At,name:"stockList"},{path:"/dashboard/stockGraph",component:Vt,name:"stockGraph"},{path:"/dashboard/fundGraph",component:Yt,name:"fundGraph"},{path:"/dashboard/fundflow",component:or,name:"fundflow"}]},{path:"/404",component:Ne,name:"404 Not Found",hidden:!0},{path:"*",hidden:!0,redirect:{path:"/404"}}],br=new s["a"]({routes:gr}),vr={login:function(e,t){var r=e.commit;return Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("/api/login",t).then((function(e){r("login",{uid:e.data.uid,username:e.data.username,rememberMe:t.rememberMe}),a["Message"].success("登录成功!"),br.push({path:"/dashboard"})})).catch((function(e){403===e.response.status?a["Message"].error("用户名或密码错误！"):(a["Message"].error("系统错误！"),console.error(e))}));case 2:case"end":return e.stop()}}),e)})))()},register:function(e,t){var r=e.commit;return Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r("doNothing"),e.next=3,c.a.post("/api/register",t).then((function(e){!0===e.data.verified?(a["Message"].success("注册成功！"),window.location.reload()):a["Message"].error(e.data.reason)})).catch((function(e){a["Message"].error("系统错误"),console.error(e)}));case 3:case"end":return e.stop()}}),e)})))()},logout:function(e){var t=e.commit;return Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.a.post("/api/logout").then((function(){t("logout")})).catch((function(e){console.error(e),a["Message"].error("登出失败！")}));case 2:case"end":return e.stop()}}),e)})))()}},wr=vr,yr=r("a78e"),xr=r.n(yr),kr={login:function(e,t){e.user.uid=t.uid,e.user.username=t.username,e.user.isLogin=!0,t.rememberMe?xr.a.set("user",{uid:e.user.uid,username:e.user.username,isLogin:!0},{expires:7}):sessionStorage.setItem("user",JSON.stringify({uid:e.user.uid,username:e.user.username,isLogin:!0}))},logout:function(e){e.user={},sessionStorage.removeItem("user"),xr.a.remove("user")}},Fr=kr,Pr=r("0e44");o["default"].use(l["a"]);var Tr={user:{}},_r={},$r=new l["a"].Store({state:Tr,getters:_r,mutations:Fr,actions:wr,plugins:[Object(Pr["a"])({storage:window.sessionStorage})]});r("1578"),o["default"].config.productionTip=!1,o["default"].use(n.a),o["default"].use(s["a"]),o["default"].use(l["a"]),o["default"].prototype.axios=c.a,c.a.defaults.withCredentials=!0,br.beforeEach((function(e,t,r){"/login"===e.path&&sessionStorage.removeItem("user");var o=xr.a.get("user");o||(o=sessionStorage.getItem("user")),o||"/login"===e.path||"/register"===e.path?r():r({path:"/login"})})),new o["default"]({render:function(e){return e(g)},router:br,store:$r}).$mount("#app")},"57a0":function(e,t,r){},"5e01":function(e,t,r){},"5edf":function(e,t,r){"use strict";var o=r("fa02"),a=r.n(o);a.a},"65b5":function(e,t,r){"use strict";var o=r("8d32"),a=r.n(o);a.a},7e3:function(e,t,r){},"822b":function(e,t,r){"use strict";var o=r("3952"),a=r.n(o);a.a},"89c7":function(e,t,r){"use strict";var o=r("8af7"),a=r.n(o);a.a},"8af7":function(e,t,r){},"8d32":function(e,t,r){},"8e96":function(e,t,r){},"918c":function(e,t,r){"use strict";var o=r("57a0"),a=r.n(o);a.a},9251:function(e,t,r){"use strict";var o=r("e7ae"),a=r.n(o);a.a},"939d":function(e,t,r){"use strict";var o=r("140b"),a=r.n(o);a.a},"9bd0":function(e,t,r){"use strict";var o=r("1d55"),a=r.n(o);a.a},ba12:function(e,t,r){},c3df:function(e,t,r){"use strict";var o=r("ba12"),a=r.n(o);a.a},cd58:function(e,t,r){},dc96:function(e,t,r){"use strict";var o=r("8e96"),a=r.n(o);a.a},dec9:function(e,t,r){"use strict";var o=r("cd58"),a=r.n(o);a.a},e123:function(e,t,r){},e7ae:function(e,t,r){},ecac:function(e,t,r){"use strict";var o=r("1870"),a=r.n(o);a.a},f4e8:function(e,t,r){"use strict";var o=r("5e01"),a=r.n(o);a.a},fa02:function(e,t,r){}});
//# sourceMappingURL=app.4aaab18b.js.map